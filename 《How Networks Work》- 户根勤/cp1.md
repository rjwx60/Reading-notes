## 浏览器生成信息

### 大致步骤总结：
**1.** 输入 **URL**，解析 **URL**，确定 **Web**服务器 和 文件名，利用这些信息生成**HTTP**请求消息  
**2.**浏览器向**DNS**服务器查询域名对应的**IP**地址，这里也涉及委托操作系统利用协议栈（操作系统内部的网络控制软件）发送消息给**DNS**服务器  
**3.**得到**IP**地址后，浏览器委托操作系统，再次利用协议栈发送消息给**Web**服务器  



#### 点1：
**url** 开头位置 **http** 表示协议即访问数据源的机制，**//** 后跟是 服务器名称 和 数据源的路径名  

#### 点2：
实际中常用 GET 和 POST 方法，PUT 和 DELETE 能从客户端修改或删除Web服务器上的文件  
一般多用于内网，或常用于 RESTful API 的设计中，在手机App和后端服务器交互时就会经常用到  


#### 点3：
浏览器本身不具备将消息发送到网络中的功能，必须经过委托、代理操作系统  



#### 点4：
IP地址分为两部分：  
"网络号"：分配给整个子网；  
"主机号"：分配给子网中的计算机，也就是网络中的地址  
通过掩码区分网络号和主机号的区域，P27+28  


#### 点5：
通过DNS查询IP地址的操作称为域名解析，负责执行此操作的称为解析器  
解析器实际上就是操作系统中的Socket库的一段程序    

注意：Socket是用于调用网络功能的程序组件集合    

首先向DNS服务器查询信息，收到响应信息后，解析器又会现身，取出IP，写入浏览器或其他程序指定的内存地址  

然后浏览器向服务器发送信息时，取出，给先前打包好的包裹”请求信息“，贴上邮递单子（IP），最后交给操作系统即可  

解析器的内部原理：  
![图1](https://github.com/rjwx60/Reading-notes/blob/master/%E3%80%8AHow%20Networks%20Work%E3%80%8B-%20%E6%88%B7%E6%A0%B9%E5%8B%A4/imgs/01.png)



#### 点6：
DNS服务器会根据客户端发来的查询信息（域名+Class+记录类型）来查询域名和记录类型对应的IP  
如果找不到，此时或根据缓存，或根据域名的层次结构来逐级向上查询，缓存的内容会有有效期，过期会清空防止错误和占容量。  
**（具体另请参阅 P35-45）**  


#### 点7：
协议栈负责发送、接收数字信息  
收发数据的几个阶段：  
创建套接字，连接到服务器端的套接字，收发数据，断开管道并删除套接字  


#### 点8：
套接字其实是管道两端的数据出入口  

套接字的创建，需要调用Scoket库中的scoket组件  

两端套接字的连接，需要调用Scoket库中的conect组件  

两端套接字的连接，需要3个参数，一个是客户端的套接字，一个是DNS查询得到的IP地址，一个是服务器端的端口号  

如果说描述符是用来在一台计算机内部识别套接字的机制，那么端口号就是用来让通信的另一方能够 识别出套接字的机制  

描述符其实是应用程序用来识别套接字的机制  


IP地址和端口号：客户端和服务器之间用来识别对方套接字的机制。

将数据送入套接字需要调用Socket库中的write组件，而接收消息需要调用Socket库中的read组件   

read会将接收到的响应消息存放到接收缓存区中，此时就相当于交给了应用程序  

